---
title: 进程
tags: os
---

## 进程的创建与终止

### 进程的创建

进程是正在执行的程序的一个实例，每个实例有他们自己的地址空间和状态。

那程序如何才能变成进程呢？
操作系统需要先把程序加载至内存中（Linux 程序可以通过调用 `execve` 函数调用加载器），
并为他分配一个唯一的 `pid`，以便区分不同的进程。
当操作系统在内核数据结果中保存适当的数据，并为运行程序分配所需的资源，程序就变成进程了。

### 进程的终止

当进程干完它的活，或者遇到错误，可以通过 exit() 系统调用请求系统删除自己。
之后进程会把返回的状态值传给父进程（父进程通过系统调用 wait()），
然后操作系统会释放进程之前申请的资源。

进程结束之后，进程在进程表中的条目还是存在的，因为进程表中包含了进程的返回值。
在进程的父进程调用 wait() 之后条目才会删除。
进程终止了，但父进程还没有调用 wait() 时，对于这种进程称为*僵尸进程*；
如果父进程还没来得及调用 wait()，父进程就宕掉了，此时的进程就会变为*孤儿进程*，
对于这类进程，系统会把 init 进程设为他们的父进程，init 进程间断的调用 wait()，
以释放*孤儿进程*的他们在进程表中的条目。
